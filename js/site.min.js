var map,marker_cluster,OpenStreetMap_DE;function load_compare_list(){var e=$("#compare").data("cookie"),e=localStorage.getItem(e),t=(list=null===e?[]:JSON.parse(e),[]);0<list.length&&list.forEach(function(e){t.push(e.id)}),$.ajax({type:"POST",url:"/api/handler/get_compare_list",data:JSON.stringify({range_ids:t}),async:!0,success:function(e){"success"===e.status?(generate_compare_listing(e.posts),toggle_display(1)):toggle_display(0)}})}function toggle_display(e){0===e?($("#compare_recordexist").hide(),$("#compare_norecord").show(),$("#compare_norecord").html("<h5 class='text-center py-10'>No listings found for comparing</h5>")):($("#compare_recordexist").show(),$("#compare_norecord").hide(),$("#compare_norecord").html(""))}function generate_compare_listing(e){var t="";0<e.length?(t+=generate_compare_listing_heading(e),toggle_display(1)):toggle_display(0),$("#compare_tbl").html(t)}function generate_compare_listing_heading(t){var a='<thead class="table-p-6">',i=(a=a+'<tr class="bg-gray-03 h-90">'+'<th class="w-25" scope="col"></th>',t.forEach(function(e){a=(a+='<th scope="col">')+'<div class="fs-16 font-weight-normal text-dark mb-0 account_title" >'+e.title+"</div></th>"}),a=(a+="</tr>")+"<tr>"+'<th scope="col"></th>',t.forEach(function(e){a=(a=(a=(a+='<th scope="col"><div class="card border-0"><div class="rounded-lg">')+'<img class="card-img-top" src="'+e.img_url+'" alt="'+e.title+'"></div><div class="card-body pt-2 pb-0 px-0">')+'<p class="font-weight-500 text-gray-light mb-0 account_title">'+e.address+"</p>")+'<p class="fs-17 font-weight-bold text-heading mb-0 lh-16 account_title">'+e.customize_price+"</p></div></div></th>"}),a=(a=a+"</tr>"+"</thead>")+'<tbody class="text-center table-p-4">'+'<tr class="bg-gray-03 h-90">',t[0].options),s=(i.forEach(function(t){t.compare_attrs=[],t.attributes.forEach(function(e){t.compare_attrs.push({id:e.id,title:e.title,value_1:"",value_2:"",value_3:""})})}),1);return t.forEach(function(e){e.options.forEach(function(e){fetch_data(i,e,s)}),s++}),i.forEach(function(e){a=(a+="<tr>")+'<td colspan="'+(t.length+1)+'" class="text-left"><h5>'+e.title+"</h5></td></tr>",e.compare_attrs.forEach(function(e){a+="<tr>",$.each(e,function(e,t){"id"!==e&&(a+="<td>"+t+"</td>")}),a+="</tr>"})}),a=a+"</tr>"+"</tbody>"}function fetch_data(e,t,a){e.forEach(function(e){e.id===t.id&&fetch_attr(e.compare_attrs,t.attributes,a)})}function fetch_attr(e,a,i){e.forEach(function(t){a.forEach(function(e){if(t.id===e.id)switch(i){case 1:t.value_1=e.values.value;break;case 2:t.value_2=e.values.value;break;case 3:t.value_3=e.values.value}})})}function get_compare_list(){var t=$("#compare").data("cookie"),e=localStorage.getItem(t);list=null===e?[]:JSON.parse(e),$("#campare_list").html(""),0<list.length&&($("#compare").show(),list.forEach(function(e){$("#campare_list").append(prepare_compare_item(e,t))}))}function compare_item_exist(e,t){var a=!1;return e.forEach(function(e){e.id==t&&(a=!0)}),a}function prepare_compare_item(e,t){var a='<div class="list-group-item card bg-transparent">';return(a+='<div class="position-relative hover-change-image bg-hover-overlay">')+('<img src="'+e.url+'" class="card-img" alt="'+e.title+'">')+'<div class="card-img-overlay">'+('<a href="#" data-id="'+e.id+'" data-cookie="'+t+'" class="text-white hover-image fs-16 lh-1 pos-fixed-top-right position-absolute m-2 remove-compare-link"><i class="fal fa-minus-circle"></i></a>')+"</div>"+"</div>"+"</div>"}function createCookie(e,t,a){var i,a=a?((i=new Date).setTime(i.getTime()+24*a*60*60*1e3),"; expires="+i.toGMTString()):"";document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+a+"; path=/"}function readCookie(e){for(var t=encodeURIComponent(e)+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var s=a[i];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(t))return decodeURIComponent(s.substring(t.length,s.length))}return null}function eraseCookie(e){createCookie(e,"",-1)}function initializeLoader(e){$(e).html('<div class="text-center" style="margin:30px 0px;">Processing...</div>')}function displayMessage(e,t,a){var i="",i=(i+='<div class="alert '+t+' alert-dismissible fade show" role="alert">')+e+"</button></div>";$(a).html(i)}$(function(){get_compare_list(),$(".sorting-options").on({change:function(e){var t=$(this).val();null!==t&&""!==t&&(window.location.href=$(this).val())}},".sorting"),$(".sorting-options").on({click:function(e){e.stopPropagation(),$("#grid_view_btn").removeClass("opacity-2 ml-5"),$("#lst_view_btn").addClass("opacity-2 ml-5"),createCookie("vsk_lst_view",1,30);e=$(this).data("url");window.location.href=e}},"#lst_view_btn"),$(".sorting-options").on({click:function(e){e.stopPropagation(),$("#grid_view_btn").addClass("opacity-2 ml-5"),$("#lst_view_btn").removeClass("opacity-2 ml-5"),createCookie("vsk_lst_view",0,30);e=$(this).data("url");window.location.href=e}},"#grid_view_btn"),$("#hero-area").on({click:function(e){$("#search_input_location").val($(this).data("value"))}},"ul.location li"),$("#hero-area").on({click:function(e){$("#search_input_ad_type").val($(this).data("value"))}},"ul.ad_type li"),$("#hero-area").on({click:function(e){$("#search_input_ad_status").val($(this).data("value"))}},"ul.ad_status li"),$("#hero-area").on({click:function(e){$("#search_input_bedrooms").val($(this).data("value"))}},"ul.bed_rooms li"),$("#hero-area").on({click:function(e){$("#search_input_bathrooms").val($(this).data("value"))}},"ul.bathrooms li"),$("#hero-area").on({click:function(e){e.stopPropagation();e=$(this).data("url");return window.location.href=e+"listings/q/?location="+$("#search_input_location").val()+"&atype="+$("#search_input_ad_type").val()+"&astatus="+$("#search_input_ad_status").val()+"&bedrooms="+$("#search_input_bedrooms").val()+"&bathrooms="+$("#search_input_bathrooms").val(),!1}},"#search_form_btn_01"),$(".list").on({click:function(e){e.stopPropagation();var e=$(this).data("url"),t=$(this).data("title");return $("#media_shr_fb_link").attr("href","https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(e)),$("#media_shr_twitter_link").attr("href","https://twitter.com/home?status="+encodeURIComponent(e)),$("#media_shr_linkedin_link").attr("href","https://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(e)+"/&title="+encodeURIComponent(t)+"&summary=&source="),$("#media_shr_reddit_link").attr("href","http://reddit.com/submit?url="+encodeURIComponent(e)+"&title="+encodeURIComponent(t)),$("#media_shr_thumblr_link").attr("href","http://www.tumblr.com/share/link?url="+encodeURIComponent(e)+"&name="+encodeURIComponent(t)),$("#media_shr_google_link").attr("href","https://plus.google.com/share?url="+encodeURIComponent(e)),$("#media_shr_whatsapp_link").attr("href","whatsapp://send?text="+encodeURIComponent(e)),$("#media_shr_messenger_link").attr("href","fb-messenger://share/?link="+encodeURIComponent(e)+"&app_id="+$("#media_shr_messenger_link").data("appid")),$("#shareModal").modal(),!1}},".share_link"),$(".mylist").on({click:function(e){e.stopPropagation();var e=$(this).data("id"),t=$(this).data("title"),a=$(this).data("price"),i=$(this).data("imgurl"),s=$(this).data("cookie"),t={id:e,title:t,url:i,price:a},i=localStorage.getItem(s);return(list=null===i?[]:JSON.parse(i)).length<3&&(compare_item_exist(list,e)||(list.push(t),localStorage.setItem(s,JSON.stringify(list)))),get_compare_list(),!1}},".compare_link"),$("#compare").on({click:function(e){e.stopPropagation();var t=$(this).data("id"),e=$(this).data("cookie"),a=localStorage.getItem(e);if(0<(list=null===a?[]:JSON.parse(a)).length){for(var i=0;i<list.length;i++)list[i].id===t&&list.splice(i,1);localStorage.setItem(e,JSON.stringify(list))}return get_compare_list(),!1}},".remove-compare-link"),$(".mylist").on({click:function(e){e.stopPropagation();var e=$(this).data("action"),t=$(this).data("id"),a=$(this).data("url"),i=$(this).data("auth"),s=$(this).data("type");return"0"===i?window.location.href=a+"signin?returnUrl="+a:0===e?($(this).addClass("text-secondary bg-accent border-accent"),$(this).removeClass("text-body hover-secondary bg-hover-accent border-hover-accent"),$(this).children("i").addClass("fas"),$(this).children("i").removeClass("far"),$(this).data("action",1),$.ajax({type:"POST",url:"/api/handler/add_to_favorites",data:JSON.stringify({contentid:t,type:s}),async:!0,cache:!0,success:function(e){console.log(e)}})):($(this).removeClass("text-secondary bg-accent border-accent"),$(this).addClass("text-body hover-secondary bg-hover-accent border-hover-accent"),$(this).children("i").addClass("far"),$(this).children("i").removeClass("fas"),$(this).data("action",0),$.ajax({type:"POST",url:"/api/handler/remove_favorite",data:JSON.stringify({contentid:t,type:s}),async:!0,cache:!0,success:function(e){console.log(e)}})),!1}},".fav_link"),$(".enqury-frm").on({click:function(e){e.stopPropagation();var e=$("#author_userid").val(),t=$("#isauth").val(),a=$("#input_name").val(),i=$("#input_email").val(),s=$("#input_phone").val(),n=$("#input_message").val(),r=$("#contact_email").val(),o=$("#enquiry_type").val(),l="#enquiry_msg",c="#enquiry_container";if(!("true"==t)){if(null==a||""==a)return displayMessage("Please enter name","alert-danger",l),!1;if(null==i||""==i)return displayMessage("Please enter email address","alert-danger",l),!1;if(!validateEmail(i))return displayMessage("Invalid email address","alert-danger",l),!1;if(null==s||""==s)return displayMessage("Please enter phone","alert-danger",l),!1}if(null==n||""==n)return displayMessage("Please enter message","alert-danger",l),!1;initializeLoader(l),$(c).hide();var u={Author_UserID:e,fullName:a,phoneNumber:s,emailAddress:i,ContactEmail:r,Message:n},d=(console.log("enquiry type is "+o),"");switch(o){case"0":d="/api/enquiry/agent_enquiry";break;case"1":d="/api/enquiry/agency_enquiry";break;case"2":u.AdId=$("#ad_id").val(),u.AdTitle=$("#ad_title").val(),d="/api/enquiry/ad_enquiry"}return console.log(u),""!=d&&$.ajax({type:"POST",url:d,data:JSON.stringify(u),async:!0,cache:!0,success:function(e){"success"===e.status?(displayMessage("Message Sent","alert-success",l),$("#input_name").length&&$("#input_name").val(""),$("#input_email").length&&$("#input_email").val(""),$("#input_phone").length&&$("#input_phone").val(""),$("#input_message").val("")):displayMessage("Error Occured","alert-danger",l),$(c).show()}}),!1}},"#btn_enquiry_submit"),$(".write-review").on({click:function(e){e.stopPropagation();var e=$("#review_isauth").val(),t=$("#review_message").val(),a=$("#review_content_id").val(),i=$("#review_author_id").val(),s=$("#review_type").val(),n=$("#review_rating").val(),r="#review_msg",o="#review_container";if(!("true"==e))return displayMessage("Please sign-in or sign-up to continue","alert-danger",r),!1;if(null==t||""==t)return displayMessage("Please enter message","alert-danger",r),!1;initializeLoader(r),$(o).hide();e="/api/review/proc";return $.ajax({type:"POST",url:e,data:JSON.stringify({profile_userid:i,contentid:a,type:s,rating:n,description:t}),async:!0,cache:!0,success:function(e){"success"===e.status?(displayMessage("Review Submitted","alert-success",r),$("#review_message").val("")):(console.log(e),displayMessage("Error Occured","alert-danger",r)),$(o).show()}}),!1}},"#btn_write_review"),$(".write-review").on({click:function(e){e.stopPropagation();e=$(this).data("rating");$("#review_rating").val(e)}},".lh-1"),$(".post-comment").on({click:function(e){e.stopPropagation();var e=$("#isauth").val(),t=$("#comment_body").val(),a=$("#content_id").val(),i=$("#content_type").val(),s="#comment_msg",n="#comment_container";if(!("true"==e))return displayMessage("Please sign-in or sign-up to continue","alert-danger",s),!1;if(null==t||""==t)return displayMessage("Please enter message","alert-danger",s),!1;initializeLoader(s),$(n).hide();e="/api/comment/post_comment";return $.ajax({type:"POST",url:e,data:JSON.stringify({contentid:a,type:i,message:t}),async:!0,cache:!0,success:function(e){"success"===e.status?(displayMessage("Comment Posted","alert-success",s),$("#input_message").val("")):displayMessage("Error Occured","alert-danger",s),$(n).show()}}),!1}},"#btn_comment_submit"),$(".offer-frm").on({click:function(e){e.stopPropagation();var e=$("#input_default_price").val(),t=$("#input_price").val(),a=$("#input_message").val(),i=$("#ad_id").val(),s=$("#user_id").val(),n="#offer_msg",r="#offer_container";if(null==t||""==t)return displayMessage("Please enter price","alert-danger",n),!1;if(parseInt(t,10)>e)return displayMessage("Offer should't exceed list price","alert-danger",n),!1;if(null==a||""==a)return displayMessage("Please enter message","alert-danger",n),!1;initializeLoader(n),$(r).hide();e="/api/enquiry/offer";return $.ajax({type:"POST",url:e,data:JSON.stringify({amount:t,message:a,userid:s,adid:i}),async:!0,cache:!0,success:function(e){"success"===e.status?(displayMessage("Offer Sent","alert-success",n),$("#input_price").length&&$("#input_price").val(""),$("#input_message").val("")):displayMessage(e.message,"alert-danger",n),$(r).show()}}),!1}},"#btn_offer_submit"),$(".contact-frm").on({click:function(e){e.stopPropagation();var e=$("#input_name").val(),t=$("#input_email").val(),a=$("#input_phone").val(),i=$("#input_message").val(),s="#contact_msg",n="#cotnact_container";if(null==e||""==e)return displayMessage("Please enter name","alert-danger",s),!1;if(null==t||""==t)return displayMessage("Please enter email address","alert-danger",s),!1;if(!validateEmail(t))return displayMessage("Invalid email address","alert-danger",s),!1;if(null==a||""==a)return displayMessage("Please enter phone","alert-danger",s),!1;if(null==i||""==i)return displayMessage("Please enter message","alert-danger",s),!1;initializeLoader(s),$(n).hide();var r="/api/enquiry/contact";return $.ajax({type:"POST",url:r,data:JSON.stringify({SenderName:e,PhoneNumber:a,EmailAddress:t,Body:i}),async:!0,cache:!0,success:function(e){"success"===e.status?(displayMessage("Message Sent","alert-success",s),$("#input_name").length&&$("#input_name").val(""),$("#input_email").length&&$("#input_email").val(""),$("#input_phone").length&&$("#input_phone").val(""),$("#input_message").val("")):displayMessage("Error Occured","alert-danger",s),$(n).show()}}),!1}},"#btn_contact_submit"),$(".main-search").on({click:function(e){$("#search-ad-type").val(0)}},"#ad-type-sale"),$(".main-search").on({click:function(e){$("#search-ad-type").val(1)}},"#ad-type-rent"),$(".main-search").on({click:function(e){var t=0==(t=$("#adv-search").val())?1:0;$("#adv-search").val(t)}},"#pnl-advance-search")});var newURL=window.location.protocol+"://"+window.location.host;function proc_analytics(e,t,a,i){isBot()||("::1"===(e={ipaddress:i,companyid:e,listingid:t,referrer:a,browser:(i=prepareResponse()).browserName,os:i.osName}).ipaddress&&(e.ipaddress="39.40.66.3"),$.ajax({url:"/api/analytics/proc",type:"post",data:JSON.stringify(e),success:function(e){console.log(e)},error:function(e,t,a){console.log(t,a)}}))}function isBot(){return/bot|google|baidu|bing|msn|duckduckbot|teoma|slurp|yandex/i.test(navigator.userAgent)?(console.log("its a bot"),!0):(console.log("its not a bot"),!1)}function prepareResponse(){var e,t={browserName:"Unknown",osName:"Unknown"},a=(navigator.appVersion,navigator.userAgent),i=navigator.appName,s=""+parseFloat(navigator.appVersion),n=(parseInt(navigator.appVersion,10),-1!=(n=a.indexOf("Opera"))?(i="Opera",s=a.substring(n+6),-1!=(n=a.indexOf("Version"))&&(s=a.substring(n+8))):-1!=(n=a.indexOf("MSIE"))?(i="Microsoft Internet Explorer",s=a.substring(n+5)):-1!=(n=a.indexOf("Chrome"))?(i="Chrome",s=a.substring(n+7)):-1!=(n=a.indexOf("Safari"))?(i="Safari",s=a.substring(n+7),-1!=(n=a.indexOf("Version"))&&(s=a.substring(n+8))):-1!=(n=a.indexOf("Firefox"))?(i="Firefox",s=a.substring(n+8)):(e=a.lastIndexOf(" ")+1)<(n=a.lastIndexOf("/"))&&(i=a.substring(e,n),s=a.substring(n+1),i.toLowerCase()==i.toUpperCase()&&(i=navigator.appName)),-1!=(e=(s=-1!=(e=s.indexOf(";"))?s.substring(0,e):s).indexOf(" "))&&(s=s.substring(0,e)),a=parseInt(""+s,10),isNaN(a)&&(s=""+parseFloat(navigator.appVersion),parseInt(navigator.appVersion,10)),t.browserName=i,getMobileOperatingSystem());return"unknown"===n?(-1!=navigator.appVersion.indexOf("Win")&&(t.osName="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(t.osName="MacOS"),-1!=navigator.appVersion.indexOf("X11")&&(t.osName="UNIX"),-1!=navigator.appVersion.indexOf("Linux")&&(t.osName="Linux")):t.osName=n,t}function getMobileOperatingSystem(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":"unknown"}$(function(){$(".cityautocomplete").autoComplete({resolver:"custom",formatResult:function(e){return{value:e.id,text:e.title+" - "+e.state}},events:{search:function(e,t){$.ajax({type:"POST",url:"/api/search/locations",data:JSON.stringify({start_search_key:e}),async:!0,cache:!0,success:function(e){t(e.posts)}})}}}),$(".enqury-frm").on({click:function(e){var t=$(this).data("url");return window.location="/signin?returnUrl="+t,!1}},"#offer-btn"),$(".search_autocomplete").autoComplete({resolver:"custom",formatResult:function(e){return{value:e.id,text:e.title}},events:{search:function(e,t){$.ajax({type:"POST",url:"/api/search/labels",data:JSON.stringify({start_search_key:e,type:18}),async:!0,cache:!0,success:function(e){t(e.posts)}})}}}),$(".brand_autocomplete").autoComplete({resolver:"custom",formatResult:function(e){return{value:e.id,text:e.title}},events:{search:function(e,t){$.ajax({type:"POST",url:"/api/search/categories",data:JSON.stringify({start_search_key:e,type:18}),async:!0,cache:!0,success:function(e){t(e.posts)}})}}}),$(".agent_search_autocomplete").autoComplete({resolver:"custom",formatResult:function(e){return{value:e.id,text:e.title}},events:{search:function(e,t){$.ajax({type:"POST",url:"/api/search/labels",data:JSON.stringify({start_search_key:e,type:17}),async:!0,cache:!0,success:function(e){t(e.posts)}})}}}),$(".agency_search_autocomplete").autoComplete({resolver:"custom",formatResult:function(e){return{value:e.id,text:e.title}},events:{search:function(e,t){$.ajax({type:"POST",url:"/api/search/labels",data:JSON.stringify({start_search_key:e,type:16}),async:!0,cache:!0,success:function(e){t(e.posts)}})}}}),$(".blog_search_autocomplete").autoComplete({resolver:"custom",formatResult:function(e){return{value:e.id,text:e.title}},events:{search:function(e,t){$.ajax({type:"POST",url:"/api/search/labels",data:JSON.stringify({start_search_key:e,type:4}),async:!0,cache:!0,success:function(e){t(e.posts)}})}}}),$(".ftco-section").on({click:function(e){$(this).toggleClass("fa-eye fa-eye-slash");var t=$($(this).attr("toggle"));"password"==t.attr("type")?(console.log("test 2"),t.attr("type","text")):(console.log("test 3"),t.attr("type","password"))}},".toggle-password"),$(".enqury-frm").on({click:function(e){return $("#shw_eml_cnt").html($(this).data("eml")),$(this).hide(),!1}},"#shw_eml"),$(".enqury-frm").on({click:function(e){return $("#shw_ph_cnt").html($(this).data("ph")),$(this).hide(),!1}},"#shw_ph"),$(".enqury-frm").on({click:function(e){var t=$(this).data("id"),a=$(this).data("auth");return $.ajax({type:"POST",url:"/api/handler/generate_chat_url",data:JSON.stringify({id:t}),success:function(e){"success"==e.status&&(window.location=0===a?"/signin?returnUrl="+e.url:e.url)}}),!1}},"#chat-btn"),$(".ad_attr").on({click:function(e){return $("#attr_more_list").is(":visible")?($("#attr_more_list").hide(),$(this).text("Show More")):($("#attr_more_list").show(),$(this).text("Show Less")),!1}},"#toggle_attr"),$(".ad_decs").on({click:function(e){return $("#desc_more").is(":visible")?($("#desc_more").hide(),$(this).text("Show More")):($("#desc_more").show(),$(this).text("Show Less")),!1}},"#toggle_desc")});